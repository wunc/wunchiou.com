function setlocation(t){navlocation=t,$("nav > a[href!="+t+"]").removeClass("nav_selected"),$("nav > a[href="+t+"]").addClass("nav_selected")}function registerHoverTips(t,e){window.innerWidth>sm_width&&t.tipTip(e)}function registerLightbox(t,e){if(window.innerWidth>sm_width){var e=e||function(t){return[t.href,t.title||t.firstChild.alt]};t.parent().slimbox({resizeDuration:200,imageFadeDuration:200,captionAnimationDuration:100},e)}}function ajaxloaded(){++num>=num_ajax_sections&&($("section").each(function(){navlist.push("#"+this.id)}),$("section").waypoint(function(t,e){setlocation("down"===e?"#"+this.id:navlist[navlist.indexOf("#"+this.id)-1])},{offset:"50%"}),$("#work_content article").each(function(){registerLightbox($(this).find("a > img"))}),registerHoverTips($("#resume_content a[title]"),{defaultPosition:"top",edgeOffset:20}))}function loadPostsSection(){$("#post_content").html("Loading posts from Wordpress ..."),$.getJSON("https://public-api.wordpress.com/rest/v1/sites/wunchiou.wordpress.com/posts/?number=5&callback=?",function(t){"error"!==t?($("#post_content").html(""),$.each(t.posts,function(t,e){var i=$("<article>",{html:e.content}),o=$("<header>"),n=$("<h1>").append($("<a>",{html:e.title,href:e.URL})),r=$("<time>",{datetime:e.date,pubdate:"pubdate",html:new Date(e.date).toLocaleDateString()});$(o).append(n),$(o).append(r),$(i).prepend(o),$("#post_content").append(i)}),registerLightbox($("#post_content article a > img:not([data-orig-file])"),function(t){return[t.href.replace(/\?.+/,"")+"?h=600",t.title||t.firstChild.alt]}),registerLightbox($("#post_content article a > img[data-orig-file]"),function(t){return[t.firstChild.getAttribute("data-orig-file")+"?h=600",t.title||t.firstChild.alt]})):$("#post_content").html("Sorry, cannot load posts right now.")}).always(ajaxloaded)}function loadPicturesSection(){var t="https://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&api_key=a26d129b372bb3273bfa954be5200d2c&user_id=49503158742@N01&extras=url_q,url_z&per_page=15&format=json&jsoncallback=?";$("#pictures_content").html("Loading photos from Flickr ..."),$.getJSON(t,function(t){"ok"===t.stat?($("#pictures_content").html(""),$.each(t.photos.photo,function(t,e){$("#pictures_content").append($("<a>",{href:e.url_z,title:e.title}).append($("<img>",{src:e.url_q,alt:e.title})))}),registerLightbox($("#pictures_content a > img")),registerHoverTips($("#pictures_content a > img").parent(),{defaultPosition:"top",edgeOffset:150})):(console.log(t.stat),$("#pictures_content").html("Sorry, cannot load pictures right now."))}).always(ajaxloaded)}!function(t){function e(){var e=z.scrollLeft(),i=z.width();t([_,T]).css("left",e+i/2),m&&t(b).css({left:e,top:z.scrollTop(),width:i,height:z.height()})}function i(i){i?t("object").add(I?"select":"embed").each(function(t,e){j[t]=[e,e.style.visibility],e.style.visibility="hidden"}):(t.each(j,function(t,e){e[0].style.visibility=e[1]}),j=[]);var n=i?"bind":"unbind";z[n]("scroll resize",e),t(document)[n]("keydown",o)}function o(e){var i=e.which,o=t.inArray;return o(i,d.closeKeys)>=0?f():o(i,d.nextKeys)>=0?r():o(i,d.previousKeys)>=0?n():null}function n(){return s(p)}function r(){return s(g)}function s(t){return t>=0&&(H=t,h=u[H][0],p=(H||(d.loop?u.length:0))-1,g=(H+1)%u.length||(d.loop?0:-1),c(),_.className="lbLoading",D=new Image,D.onload=a,D.src=h),!1}function a(){_.className="",t(x).css({backgroundImage:"url("+h+")",visibility:"hidden",display:""}),t($).width(D.width),t([$,k,S]).height(D.height),t(L).html(u[H][1]||""),t(M).html((u.length>1&&d.counterText||"").replace(/{x}/,H+1).replace(/{y}/,u.length)),p>=0&&(A.src=u[p][0]),g>=0&&(P.src=u[g][0]),y=x.offsetWidth,w=x.offsetHeight;var e=Math.max(0,v-w/2);_.offsetHeight!=w&&t(_).animate({height:w,top:e},d.resizeDuration,d.resizeEasing),_.offsetWidth!=y&&t(_).animate({width:y,marginLeft:-y/2},d.resizeDuration,d.resizeEasing),t(_).queue(function(){t(T).css({width:y,top:e+w,marginLeft:-y/2,visibility:"hidden",display:""}),t(x).css({display:"none",visibility:"",opacity:""}).fadeIn(d.imageFadeDuration,l)})}function l(){p>=0&&t(k).show(),g>=0&&t(S).show(),t(O).css("marginTop",-O.offsetHeight).animate({marginTop:0},d.captionAnimationDuration),T.style.visibility=""}function c(){D.onload=null,D.src=A.src=P.src=h,t([_,x,O]).stop(!0),t([k,S,x,T]).hide()}function f(){return H>=0&&(c(),H=p=g=-1,t(_).hide(),t(b).stop().fadeOut(d.overlayFadeDuration,i)),!1}var d,u,h,p,g,m,v,y,w,b,_,x,$,k,S,T,O,L,M,z=t(window),H=-1,I=!window.XMLHttpRequest,j=[],D=(document.documentElement,{}),A=new Image,P=new Image;t(function(){t("body").append(t([b=t('<div id="lbOverlay" />').click(f)[0],_=t('<div id="lbCenter" />')[0],T=t('<div id="lbBottomContainer" />')[0]]).css("display","none")),x=t('<div id="lbImage" />').appendTo(_).append($=t('<div style="position: relative;" />').append([k=t('<a id="lbPrevLink" href="#" />').click(n)[0],S=t('<a id="lbNextLink" href="#" />').click(r)[0]])[0])[0],O=t('<div id="lbBottom" />').appendTo(T).append([t('<a id="lbCloseLink" href="#" />').click(f)[0],L=t('<div id="lbCaption" />')[0],M=t('<div id="lbNumber" />')[0],t('<div style="clear: both;" />')[0]])[0]}),t.slimbox=function(o,n,r){return d=t.extend({loop:!1,overlayOpacity:.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image {x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},r),"string"==typeof o&&(o=[[o,n]],n=0),v=z.scrollTop()+z.height()/2,y=d.initialWidth,w=d.initialHeight,t(_).css({top:Math.max(0,v-w/2),width:y,height:w,marginLeft:-y/2}).show(),m=I||b.currentStyle&&"fixed"!=b.currentStyle.position,m&&(b.style.position="absolute"),t(b).css("opacity",d.overlayOpacity).fadeIn(d.overlayFadeDuration),e(),i(1),u=o,d.loop=d.loop&&u.length>1,s(n)},t.fn.slimbox=function(e,i,o){i=i||function(t){return[t.href,t.title]},o=o||function(){return!0};var n=this;return n.unbind("click").click(function(){var r,s,a=this,l=0,c=0;for(r=t.grep(n,function(t,e){return o.call(a,t,e)}),s=r.length;c<s;++c)r[c]==a&&(l=c),r[c]=i(r[c],c);return t.slimbox(r,l,e)})}}(jQuery),/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)||jQuery(function(t){t("a[rel^='lightbox']").slimbox({},null,function(t){return this==t||this.rel.length>8&&this.rel==t.rel})}),function(t){t.fn.tipTip=function(e){var i={activation:"hover",keepAlive:!1,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:!1,enter:function(){},exit:function(){}},o=t.extend(i,e);if(t("#tiptip_holder").length<=0){var n=t('<div id="tiptip_holder" style="max-width:'+o.maxWidth+';"></div>'),r=t('<div id="tiptip_content"></div>'),s=t('<div id="tiptip_arrow"></div>');t("body").append(n.html(r).prepend(s.html('<div id="tiptip_arrow_inner"></div>')))}else var n=t("#tiptip_holder"),r=t("#tiptip_content"),s=t("#tiptip_arrow");return this.each(function(){function e(){o.enter.call(this),r.html(l),n.hide().removeAttr("class").css("margin","0"),s.removeAttr("style");var e=parseInt(a.offset().top),i=parseInt(a.offset().left),f=parseInt(a.outerWidth()),d=parseInt(a.outerHeight()),u=n.outerWidth(),h=n.outerHeight(),p=Math.round((f-u)/2),g=Math.round((d-h)/2),m=Math.round(i+p),v=Math.round(e+d+o.edgeOffset),y="",w="",b=Math.round(u-12)/2;"bottom"==o.defaultPosition?y="_bottom":"top"==o.defaultPosition?y="_top":"left"==o.defaultPosition?y="_left":"right"==o.defaultPosition&&(y="_right");var _=p+i<parseInt(t(window).scrollLeft()),x=u+i>parseInt(t(window).width());_&&p<0||"_right"==y&&!x||"_left"==y&&i<u+o.edgeOffset+5?(y="_right",w=Math.round(h-13)/2,b=-12,m=Math.round(i+f+o.edgeOffset),v=Math.round(e+g)):(x&&p<0||"_left"==y&&!_)&&(y="_left",w=Math.round(h-13)/2,b=Math.round(u),m=Math.round(i-(u+o.edgeOffset+5)),v=Math.round(e+g));var $=e+d+o.edgeOffset+h+8>parseInt(t(window).height()+t(window).scrollTop()),k=e+d-(o.edgeOffset+h+8)<0;$||"_bottom"==y&&$||"_top"==y&&!k?("_top"==y||"_bottom"==y?y="_top":y+="_top",w=h,v=Math.round(e-(h+5+o.edgeOffset))):(k|("_top"==y&&k)||"_bottom"==y&&!$)&&("_top"==y||"_bottom"==y?y="_bottom":y+="_bottom",w=-12,v=Math.round(e+d+o.edgeOffset)),"_right_top"==y||"_left_top"==y?v+=5:"_right_bottom"!=y&&"_left_bottom"!=y||(v-=5),"_left_top"!=y&&"_left_bottom"!=y||(m+=5),s.css({"margin-left":b+"px","margin-top":w+"px"}),n.css({"margin-left":m+"px","margin-top":v+"px"}).attr("class","tip"+y),c&&clearTimeout(c),c=setTimeout(function(){n.stop(!0,!0).fadeIn(o.fadeIn)},o.delay)}function i(){o.exit.call(this),c&&clearTimeout(c),n.fadeOut(o.fadeOut)}var a=t(this);if(o.content)var l=o.content;else var l=a.attr(o.attribute);if(""!=l){o.content||a.removeAttr(o.attribute);var c=!1;"hover"==o.activation?(a.hover(function(){e()},function(){o.keepAlive||i()}),o.keepAlive&&n.hover(function(){},function(){i()})):"focus"==o.activation?a.focus(function(){e()}).blur(function(){i()}):"click"==o.activation&&(a.click(function(){return e(),!1}).hover(function(){},function(){o.keepAlive||i()}),o.keepAlive&&n.hover(function(){},function(){i()}))}})}}(jQuery),function(t,e,i,o,n){var r=t(o),s="waypoint.reached",a=function(t,i){t.element.trigger(s,i),t.options.triggerOnce&&t.element[e]("destroy")},l=function(t,e){if(!e)return-1;for(var i=e.waypoints.length-1;i>=0&&e.waypoints[i].element[0]!==t[0];)i-=1;return i},c=[],f=function(e){t.extend(this,{element:t(e),oldScroll:0,waypoints:[],didScroll:!1,didResize:!1,doScroll:t.proxy(function(){var e=this.element.scrollTop(),o=e>this.oldScroll,n=this,r=t.grep(this.waypoints,function(t,i){return o?t.offset>n.oldScroll&&t.offset<=e:t.offset<=n.oldScroll&&t.offset>e}),s=r.length;this.oldScroll&&e||t[i]("refresh"),this.oldScroll=e,s&&(o||r.reverse(),t.each(r,function(t,e){(e.options.continuous||t===s-1)&&a(e,[o?"down":"up"])}))},this)}),t(e).bind("scroll.waypoints",t.proxy(function(){this.didScroll||(this.didScroll=!0,o.setTimeout(t.proxy(function(){this.doScroll(),this.didScroll=!1},this),t[i].settings.scrollThrottle))},this)).bind("resize.waypoints",t.proxy(function(){this.didResize||(this.didResize=!0,o.setTimeout(t.proxy(function(){t[i]("refresh"),this.didResize=!1},this),t[i].settings.resizeThrottle))},this)),r.load(t.proxy(function(){this.doScroll()},this))},d=function(e){var i=null;return t.each(c,function(t,o){if(o.element[0]===e)return i=o,!1}),i},u={init:function(o,n){return this.each(function(){var r,a=t.fn[e].defaults.context,u=t(this);n&&n.context&&(a=n.context),t.isWindow(a)||(a=u.closest(a)[0]),r=d(a),r||(r=new f(a),c.push(r));var h=l(u,r),p=h<0?t.fn[e].defaults:r.waypoints[h].options,g=t.extend({},p,n);g.offset="bottom-in-view"===g.offset?function(){var e=t.isWindow(a)?t[i]("viewportHeight"):t(a).height();return e-t(this).outerHeight()}:g.offset,h<0?r.waypoints.push({element:u,offset:null,options:g}):r.waypoints[h].options=g,o&&u.bind(s,o),n&&n.handler&&u.bind(s,n.handler)}),t[i]("refresh"),this},remove:function(){return this.each(function(e,i){var o=t(i);t.each(c,function(t,e){var i=l(o,e);i>=0&&(e.waypoints.splice(i,1),e.waypoints.length||(e.element.unbind("scroll.waypoints resize.waypoints"),c.splice(t,1)))})})},destroy:function(){return this.unbind(s)[e]("remove")}},h={refresh:function(){t.each(c,function(e,o){var n=t.isWindow(o.element[0]),r=n?0:o.element.offset().top,s=n?t[i]("viewportHeight"):o.element.height(),l=n?0:o.element.scrollTop();t.each(o.waypoints,function(t,e){if(e){var i=e.options.offset,n=e.offset;if("function"==typeof e.options.offset)i=e.options.offset.apply(e.element);else if("string"==typeof e.options.offset){var c=parseFloat(e.options.offset);i=e.options.offset.indexOf("%")?Math.ceil(s*(c/100)):c}e.offset=e.element.offset().top-r+l-i,e.options.onlyOnScroll||(null!==n&&o.oldScroll>n&&o.oldScroll<=e.offset?a(e,["up"]):null!==n&&o.oldScroll<n&&o.oldScroll>=e.offset?a(e,["down"]):!n&&o.element.scrollTop()>e.offset&&a(e,["down"]))}}),o.waypoints.sort(function(t,e){return t.offset-e.offset})})},viewportHeight:function(){return o.innerHeight?o.innerHeight:r.height()},aggregate:function(){var e=t();return t.each(c,function(i,o){t.each(o.waypoints,function(t,i){e=e.add(i.element)})}),e}};t.fn[e]=function(i){return u[i]?u[i].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof i&&i?"object"==typeof i?u.init.apply(this,[null,i]):void t.error("Method "+i+" does not exist on jQuery "+e):u.init.apply(this,arguments)},t.fn[e].defaults={continuous:!0,offset:0,triggerOnce:!1,context:o},t[i]=function(t){return h[t]?h[t].apply(this):h.aggregate()},t[i].settings={resizeThrottle:200,scrollThrottle:100},r.load(function(){t[i]("refresh")})}(jQuery,"waypoint","waypoints",window);var navlocation="#about",navlist=[],num=0,num_ajax_sections=4,sm_width=480;jQuery(document).ready(function(t){t("a[href*=#]").click(function(e){e.preventDefault();var i=t(this).attr("href");return t("footer").css("height","200px"),t("html, body").stop().animate({scrollTop:t(i).offset().top},700,"swing",function(){location.hash=i,t("footer").css("height","1px")}),!1}),t("#resume_content").load("resume/resume.html",ajaxloaded),t("#work_content").load("portfolio/portfolio.html",ajaxloaded),loadPostsSection(),loadPicturesSection(),registerHoverTips(t("#contact a[title]"),{edgeOffset:15})});